<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
	<title>TestingIntroJava</title>
</head>
<body>
<h1>TestingIntroJava: Demonstration of a test framework</h1>

Reminder: If there's been a correction to this exercise posted,
update your local copy via
<A HREF="../../index.html#corrections">these instructions</a>
before proceeding.

<P>
Goal: Gain familiarity with a typical test framework
<P>
First, set up the local environment:
 <CODE><PRE>
   cd TestingIntroJava
   source setup.sh
 </PRE></code>
You'll find our sum-of-primes example in the file SumPrimes.java.  It's been recast as a Java class.
To compile and run it, hopefully printing the sum of primes in the 1st 7 integers, do:

 <CODE><PRE>
   ./build
   java SumPrimes 7
 </PRE></code>
(As we discussed in class, the original code doesn't work correctly.)
<p>
If you want to see the actual compilation commands used, look inside the "build" file.
Note that this is just recompiling everything and leaving the resulting machine-readable files in the current directory.
This is a fine approach in a simple project like this exercise;
larger projects will use some form of "make" tool to do this smarter and more efficiently.

 <P>
The file TestSumPrimes.java contains the code to setup JUnit, plus a single test.
Take a look at it, and see if you understand what it contains.
You can run it with

 <CODE><PRE>
  java TestSumPrimes
 </PRE></code>

In its initial form, the test just makes sure that you can create a SumPrimes object, and passes.
That gives the "OK" response.
<P>
There are commented-out tests that will check specific test cases,
and therefore fail in the manner we discussed in lecture.
Remove the leading // that comments out those lines, and watch the test fail when you run it:

 <CODE><PRE>
  (edit the TestSumPrimes.java file)
  ./build
  java TestSumPrimes
 </PRE></code>

Isn't that "FAILURES!!!" message ugly? Now fix the bug(s) (See below for hints),
and see the lovely "OK" again.
Finally, add a couple more tests to check other ranges.
(The sum of primes from 1 to 20 is 77, for example)
<P>
Hints:
<UL>
<LI>It might be simpler to separate development
and test of the "is N prime?" code from the "check the sum over a range" code.
That way you can test the two parts separately.
In the "refactored" subdirectory we've provided a version of the SumPrimes.java
and TestSumPrimes.java files where that's been started.
Copy those to the exercise1 directory if you'd like to see if that's an easier way to work.
You might want to add additional tests to TestSumPrimes.java.

<LI>It's OK for a prime number to be divisible by 1.

<LI>If you try to divide a prime number by itself, you'll find that the remainder is zero.

</UL>
</body>
</html>
